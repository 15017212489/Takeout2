{"ast":null,"code":"import axios, { all } from \"axios\";\nexport default {\n  data() {\n    return {\n      loginWay: true,\n      username: '',\n      password: '',\n      id: 1,\n      username2: '',\n      password2: '',\n      account: []\n    };\n  },\n\n  mounted() {},\n\n  methods: {\n    all() {\n      //查找account表全部数据\n      axios.get('http://127.0.0.1/account/all').then(res => {\n        this.account = res.data;\n      }).catch(err => {\n        console.log(\"获取数据失败\" + err);\n      });\n    },\n\n    add() {\n      //添加操作\n      if (this.username2 == '') {\n        alert('账号不得为空');\n      } else if (this.password2 == '') {\n        alert('密码不得为空');\n      } else if (this.username2.length < 5) {\n        alert('账号过短');\n      } else if (this.password2.length < 5) {\n        alert('密码过短');\n      } else {\n        axios.get('http://127.0.0.1/account/all').then(res => {\n          for (var i = 0; i < res.data.length; i++) {\n            if (res.data[i].username == this.username2) {\n              alert('账号重复');\n            } else {\n              for (var i = 0; i < this.res.data.length; i++) {\n                if (this.id < this.res.data[i].id) this.id = res.data[i].id;\n              }\n\n              this.account = res.data;\n              axios.get('http://127.0.0.1/account/add', {\n                params: {\n                  id: parseInt(this.id) + 1,\n                  username: this.username2,\n                  password: this.password2\n                }\n              }).then(res => {\n                if (res.data.status == 200) {\n                  this.all();\n                  alert('注册成功');\n                  this.loginWay = true;\n                  this.username = this.username2;\n                  this.password = this.password2;\n                } else {\n                  this.$message({\n                    message: '添加失败',\n                    type: 'error'\n                  });\n                }\n              }).catch(err => {\n                console.log(\"操作失败\" + err);\n              });\n            }\n          }\n        }).catch(err => {\n          console.log(\"获取数据失败\" + err);\n        });\n      }\n    },\n\n    clean() {\n      this.username = '', this.username2 = '', this.password = '', this.password2 = '';\n    }\n\n  }\n};","map":{"version":3,"mappings":"AA8CA;AACA;EACAA;IACA;MACAC,cADA;MAEAC,YAFA;MAGAC,YAHA;MAIAC,KAJA;MAKAC,aALA;MAMAC,aANA;MAOAC;IAPA;EASA,CAXA;;EAYAC,WAEA,CAdA;;EAeAC;IACAC;MAAA;MACAC;QACA;MACA,CAFA,EAEAC,KAFA,CAEAC;QACAC;MACA,CAJA;IAKA,CAPA;;IAQAC;MAAA;MACA;QACAC;MACA,CAFA,MAEA;QACAA;MACA,CAFA,MAEA;QACAA;MACA,CAFA,MAEA;QACAA;MACA,CAFA,MAEA;QACAL;UACA;YACA;cACAK;YACA,CAFA,MAEA;cACA;gBACA;cACA;;cACA;cACAL;gBACAM;kBACAb,yBADA;kBAEAF,wBAFA;kBAGAC;gBAHA;cADA,GAMAe,IANA,CAMAC;gBACA;kBACA;kBACAH;kBACA;kBACA;kBACA;gBACA,CANA,MAMA;kBACA;oBACAI,eADA;oBAEAC;kBAFA;gBAIA;cACA,CAnBA,EAmBAT,KAnBA,CAmBAC;gBACAC;cACA,CArBA;YAsBA;UACA;QACA,CAjCA,EAiCAF,KAjCA,CAiCAC;UACAC;QACA,CAnCA;MAoCA;IACA,CAvDA;;IAwDAQ;MACA,oBACA,mBADA,EAEA,kBAFA,EAGA,mBAHA;IAIA;;EA7DA;AAfA","names":["data","loginWay","username","password","id","username2","password2","account","mounted","methods","all","axios","catch","err","console","add","alert","params","then","res","message","type","clean"],"sourceRoot":"src/pages/Login","sources":["Login.vue"],"sourcesContent":["<template>\r\n  <div class=\"loginContainer\">\r\n    <div class=\"loginInner\">\r\n      <div class=\"login_header\">\r\n        <h2 class=\"login_logo\">X外卖</h2>\r\n        <div class=\"login_header_title\">\r\n          <a href=\"javascript:\" :class=\"{on: loginWay}\" @click=\"loginWay = true\">账号登录</a>\r\n          <a href=\"javascript:\" :class=\"{on: !loginWay}\" @click=\"loginWay = false\">账号注册</a>\r\n        </div>\r\n      </div>\r\n      <div class=\"login_content\">\r\n        <form>\r\n          <div :class=\"{on: loginWay}\">\r\n            <section class=\"login_message\">\r\n              <input type=\"text\" placeholder=\"账号\" v-model=\"username\">\r\n            </section>\r\n            <section class=\"login_verification\">\r\n              <input type=\"password\" placeholder=\"密码\" v-model=\"password\">\r\n            </section>\r\n            <section class=\"login_hint\">\r\n              温馨提示：登录X外卖帐号即代表已同意\r\n              <a href=\"#\">《用户服务协议》</a>\r\n            </section>\r\n            <button class=\"login_submit\">登录</button>\r\n          </div>\r\n          <div :class=\"{on: !loginWay}\">\r\n            <section class=\"register_message\">\r\n              <input type=\"text\" placeholder=\"账号\" v-model=\"username2\">\r\n            </section>\r\n            <section class=\"register_verification\">\r\n              <input type=\"password\" placeholder=\"密码\" v-model=\"password2\">\r\n            </section>\r\n            <button class=\"register_submit\" @click=\"add\">注册</button>\r\n          </div>\r\n          \r\n        </form>\r\n        <a href=\"javascript:\" class=\"about_us\">关于我们</a>\r\n      </div>\r\n      <a href=\"javascript:\" class=\"go_back\" @click=\"$router.back()\">\r\n        <i class=\"iconfont icon-xiangzuojiantou\"></i>\r\n      </a>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios, { all } from \"axios\"\r\n  export default{\r\n    data(){\r\n        return{\r\n          loginWay: true,\r\n          username: '',\r\n          password: '', \r\n          id: 1,\r\n          username2: '',\r\n          password2: '',\r\n          account:[]\r\n        }\r\n    },\r\n    mounted(){\r\n      \r\n    },\r\n    methods: {\r\n      all() {    //查找account表全部数据\r\n        axios.get('http://127.0.0.1/account/all').then(res=>{\r\n            this.account = res.data\r\n        }).catch(err=>{\r\n            console.log(\"获取数据失败\" + err);\r\n        })\r\n      },\r\n      add() {   //添加操作\r\n        if( this.username2 == '' ){\r\n            alert('账号不得为空')\r\n          }else if( this.password2 == ''){\r\n            alert('密码不得为空')\r\n          }else if( this.username2.length < 5){\r\n            alert('账号过短')\r\n          }else if( this.password2.length < 5 ){\r\n            alert('密码过短')\r\n          }else{\r\n            axios.get('http://127.0.0.1/account/all').then(res=>{\r\n            for(var i=0;i<res.data.length;i++){\r\n              if( res.data[i].username == this.username2 ){\r\n                alert('账号重复')\r\n              }else{\r\n                for(var i=0;i<this.res.data.length;i++){\r\n                  if( this.id < this.res.data[i].id )this.id = res.data[i].id\r\n                }\r\n                this.account = res.data\r\n                axios.get('http://127.0.0.1/account/add',{\r\n                  params: {\r\n                    id: parseInt(this.id) + 1,\r\n                    username: this.username2,\r\n                    password: this.password2,\r\n                  }\r\n                }).then(res=>{\r\n                    if(res.data.status == 200) {\r\n                      this.all()\r\n                      alert('注册成功')\r\n                      this.loginWay = true\r\n                      this.username = this.username2\r\n                      this.password = this.password2\r\n                    }else{\r\n                      this.$message({\r\n                      message: '添加失败',\r\n                      type: 'error'\r\n                    });\r\n                    }\r\n                }).catch(err=>{\r\n                    console.log(\"操作失败\" + err);\r\n                })\r\n              }\r\n            }\r\n          }).catch(err=>{\r\n              console.log(\"获取数据失败\" + err);\r\n          })\r\n        }\r\n      },\r\n      clean(){\r\n        this.username = '',\r\n        this.username2 = '',\r\n        this.password = '',\r\n        this.password2 = ''\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\">\r\n  @import \"../../common/style/mixins.less\";\r\n  .loginContainer{\r\n    width: 100%;\r\n    height: 100%;\r\n    background: #fff;\r\n    .loginInner{\r\n      padding-top: 60px;\r\n      width: 80%;\r\n      margin: 0 auto;\r\n      .login_header{\r\n        .login_logo{\r\n          font-size: 40px;\r\n          font-weight: bold;\r\n          color: #51808f;\r\n          text-align: center;\r\n        }\r\n        .login_header_title{\r\n          padding-top: 40px;\r\n          text-align: center;\r\n          >a{\r\n            color: #333;\r\n            font-size: 14px;\r\n            padding-bottom: 4px;\r\n            &:first-child{\r\n              margin-right: 40px;\r\n            }\r\n            &.on{\r\n              color: #51808f;\r\n              font-weight: 700;\r\n              border-bottom: 2px solid #51808f;\r\n            }\r\n          }\r\n        }\r\n      }\r\n      .login_content{\r\n        >form{\r\n          >div{\r\n            display: none;\r\n            &.on{\r\n              display: block;\r\n            }\r\n            input{\r\n              width: 100%;\r\n              height: 100%;\r\n              padding-left: 10px;\r\n              box-sizing: border-box;\r\n              border: 1px solid #ddd;\r\n              border-radius: 4px;\r\n              outline: 0;\r\n              font: 400 14px Arial;\r\n              &:focus{\r\n                border: 1px solid #51808f;\r\n              }\r\n            }\r\n            .login_message,.register_message{\r\n              position: relative;\r\n              margin-top: 16px;\r\n              height: 48px;\r\n              font-size: 14px;\r\n              background: #fff;\r\n              .get_verification{\r\n                position: absolute;\r\n                top: 50%;\r\n                right: 10px;\r\n                transform: translateY(-50%);\r\n                border: 0;\r\n                color: #ccc;\r\n                font-size: 14px;\r\n                background: transparent;\r\n                &.showBlack{\r\n                  color: black;\r\n                }\r\n              }\r\n            }\r\n            .login_verification,.register_verification{\r\n              position: relative;\r\n              margin-top: 16px;\r\n              height: 48px;\r\n              font-size: 14px;\r\n              background: #fff;\r\n              .switch_button{\r\n                font-size: 12px;\r\n                border: 1px solid #ddd;\r\n                border-radius: 8px;\r\n                transition: background-color .3s,border-color .3s;\r\n                padding: 0 6px;\r\n                width: 30px;\r\n                height: 16px;\r\n                line-height: 16px;\r\n                color: #fff;\r\n                position: absolute;\r\n                top: 50%;\r\n                right: 10px;\r\n                transform: translateY(-50%);\r\n                &.off{\r\n                  background: #fff;\r\n                  .switch_text{\r\n                    float: right;\r\n                    color: #ddd;\r\n                  }\r\n                }\r\n                &.on{\r\n                  background: #51808f;\r\n                }\r\n                >.switch_circle{\r\n                  //transform translateX(27px);\r\n                  position: absolute;\r\n                  top: -1px;\r\n                  left: -1px;\r\n                  width: 16px;\r\n                  height: 16px;\r\n                  border: 1px solid #ddd;\r\n                  border-radius: 50%;\r\n                  background: #fff;\r\n                  box-shadow: 0 2px 4px 0 rgba(0,0,0,.1);\r\n                  transition: transform .3s;\r\n                  &.right{\r\n                    transform: translateX(31px);\r\n                  }\r\n                }\r\n              }\r\n            }\r\n            .login_hint{\r\n              margin-top: 12px;\r\n              color: #999;\r\n              font-size: 14px;\r\n              line-height: 20px;\r\n              >a{\r\n                color: #51808f;\r\n              }\r\n            }\r\n          }\r\n          .login_submit,.register_submit{\r\n            display: block;\r\n            width: 100%;\r\n            height: 42px;\r\n            margin-top: 30px;\r\n            border-radius: 4px;\r\n            background: #51808f;\r\n            color: #fff;\r\n            text-align: center;\r\n            font-size: 16px;\r\n            line-height: 42px;\r\n            border: 0;\r\n          }\r\n        }\r\n        .about_us{\r\n          display: block;\r\n          font-size: 12px;\r\n          margin-top: 20px;\r\n          text-align: center;\r\n          color: #999;\r\n        }\r\n      }\r\n      .go_back{\r\n        position: absolute;\r\n        top: 5px;\r\n        left: 5px;\r\n        width: 30px;\r\n        height: 30px;\r\n        .icon-xiangzuojiantou{\r\n          line-height: 30px;\r\n          margin-left: 5px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}
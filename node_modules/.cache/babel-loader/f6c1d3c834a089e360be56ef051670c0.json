{"ast":null,"code":"import ShopList from '../../components/ShopList/ShopList';\nimport HeaderTop from '../../components/HeaderTop/HeaderTop.vue';\nimport Swiper from 'swiper';\nimport 'swiper/dist/css/swiper.css';\nimport axios from \"axios\"; //import {mapState} from 'vuex'\n\nexport default {\n  data() {\n    return {\n      id: '',\n      name: '',\n      address: '',\n      tel: '',\n      infos: [],\n      arr: [],\n      flag: [0, 1]\n    };\n  },\n\n  mounted() {\n    //this.$store.dispatch('getCategorys')\n    //实例 Swiper对象\n    new Swiper('.swiper-container', {\n      loop: true,\n      //循环\n      pagination: {\n        el: '.swiper-pagination',\n        clickable: true\n      }\n    }); //获取数据\n\n    this.all(); //this.categoryArr();\n  },\n\n  components: {\n    HeaderTop,\n    ShopList\n  },\n  computed: {\n    categoryArr() {\n      const infos = this.infos;\n      let minArr = [];\n      infos.forEach(category => {\n        if (minArr.length === 8) {\n          minArr = [];\n        }\n\n        if (minArr.length === 0) {\n          this.arr.push(minArr);\n        }\n\n        minArr.push(category);\n      });\n      return this.arr;\n    }\n\n  },\n  methods: {\n    all() {\n      //查找info表全部数据\n      axios.get('http://127.0.0.1/list/all').then(res => {\n        //console.log(res.data);\n        this.infos = res.data; // this.arr = [];\n        // const categorys = res.data;\n        // let minArr = [];\n        // categorys.forEach(category => {\n        //   if(minArr.length === 8){\n        //     minArr = [];\n        //   }\n        //   if(minArr.length === 0){\n        //     this.arr.push(minArr);\n        //   }\n        //   minArr.push(category)\n        // })\n      }).catch(err => {\n        console.log(\"获取数据失败\" + err);\n      });\n    },\n\n    del() {\n      //删除操作\n      axios.get('http://127.0.0.1/list/del', {\n        params: {\n          id: this.id\n        }\n      }).then(res => {\n        // console.log(res.data);\n        if (res.data.status == 200) {\n          this.all();\n        } else {\n          this.$message({\n            message: '删除失败',\n            type: 'error'\n          });\n        }\n      }).catch(err => {\n        console.log(\"操作失败\" + err);\n      });\n    },\n\n    get() {\n      //查询操作\n      axios.get('http://127.0.0.1/list/get', {\n        params: {\n          id: this.id\n        }\n      }).then(res => {\n        console.log(res.data); //this.info = res.data\n      }).catch(err => {\n        console.log(\"操作失败\" + err);\n      });\n    },\n\n    add() {\n      //添加操作\n      axios.get('http://127.0.0.1/list/add', {\n        params: {\n          id: this.id,\n          name: this.name,\n          address: this.address,\n          tel: this.tel\n        }\n      }).then(res => {\n        // console.log(res.data);\n        if (res.data.status == 200) {\n          this.all();\n        } else {\n          this.$message({\n            message: '添加失败',\n            type: 'error'\n          });\n        }\n      }).catch(err => {\n        console.log(\"操作失败\" + err);\n      });\n    },\n\n    update() {\n      //修改操作\n      axios.get('http://127.0.0.1/list/update', {\n        params: {\n          id: this.id,\n          name: this.name,\n          address: this.address,\n          tel: this.tel\n        }\n      }).then(res => {\n        // console.log(res.data);\n        if (res.data.status == 200) {\n          this.all();\n        } else {\n          this.$message({\n            message: '修改失败',\n            type: 'error'\n          });\n        }\n      }).catch(err => {\n        console.log(\"操作失败\" + err);\n      });\n    }\n\n  },\n  watch: {}\n};","map":{"version":3,"mappings":"AAqEA;AACA;AACA;AACA;AACA,0B,CACA;;AACA;EACAA;IACA;MACAC,MADA;MAEAC,QAFA;MAGAC,WAHA;MAIAC,OAJA;MAKAC,SALA;MAMAC,OANA;MAOAC;IAPA;EASA,CAXA;;EAYAC;IAEA;IAEA;IACA;MACAC,UADA;MACA;MACAC;QACAC,wBADA;QAEAC;MAFA;IAFA,GALA,CAYA;;IACA,WAbA,CAcA;EACA,CA3BA;;EA4BAC;IACAC,SADA;IACAC;EADA,CA5BA;EA+BAC;IACAC;MACA;MACA;MACAZ;QACA;UACAa;QACA;;QACA;UACA;QACA;;QACAA;MACA,CARA;MASA;IACA;;EAdA,CA/BA;EA+CAC;IACAC;MAAA;MACAC;QACA;QACA,sBAFA,CAIA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;MACA,CAhBA,EAgBAC,KAhBA,CAgBAC;QACAC;MACA,CAlBA;IAmBA,CArBA;;IAsBAC;MAAA;MACAJ;QACAK;UACAzB;QADA;MADA,GAIA0B,IAJA,CAIAC;QACA;QACA;UACA;QACA,CAFA,MAEA;UACA;YACAC,eADA;YAEAC;UAFA;QAIA;MACA,CAdA,EAcAR,KAdA,CAcAC;QACAC;MACA,CAhBA;IAiBA,CAxCA;;IAyCAO;MAAA;MACAV;QACAK;UACAzB;QADA;MADA,GAIA0B,IAJA,CAIAC;QACAJ,sBADA,CAEA;MACA,CAPA,EAOAF,KAPA,CAOAC;QACAC;MACA,CATA;IAUA,CApDA;;IAqDAQ;MAAA;MACAX;QACAK;UACAzB,WADA;UAEAC,eAFA;UAGAC,qBAHA;UAIAC;QAJA;MADA,GAOAuB,IAPA,CAOAC;QACA;QACA;UACA;QACA,CAFA,MAEA;UACA;YACAC,eADA;YAEAC;UAFA;QAIA;MACA,CAjBA,EAiBAR,KAjBA,CAiBAC;QACAC;MACA,CAnBA;IAoBA,CA1EA;;IA2EAS;MAAA;MACAZ;QACAK;UACAzB,WADA;UAEAC,eAFA;UAGAC,qBAHA;UAIAC;QAJA;MADA,GAOAuB,IAPA,CAOAC;QACA;QACA;UACA;QACA,CAFA,MAEA;UACA;YACAC,eADA;YAEAC;UAFA;QAIA;MACA,CAjBA,EAiBAR,KAjBA,CAiBAC;QACAC;MACA,CAnBA;IAoBA;;EAhGA,CA/CA;EAkJAU;AAlJA","names":["data","id","name","address","tel","infos","arr","flag","mounted","loop","pagination","el","clickable","components","HeaderTop","ShopList","computed","categoryArr","minArr","methods","all","axios","catch","err","console","del","params","then","res","message","type","get","add","update","watch"],"sourceRoot":"src/pages/MSite","sources":["MSite.vue"],"sourcesContent":["<template>\r\n  <div class=\"msite\">\r\n    <HeaderTop title=\"Takaout\">\r\n      <span class=\"header_search\" slot=\"left\">\r\n        <router-link to=\"/search\"><i class=\"iconfont icon-sousuo\"></i></router-link>\r\n      </span>\r\n      <span class=\"header_login\" slot=\"right\">\r\n        <router-link to=\"/login\"><span class=\"header_login_text\">登录|注册</span></router-link>\r\n      </span>\r\n    </HeaderTop>\r\n    <!-- <nav class=\"msite_nav\">\r\n      <div class=\"swiper-container\">\r\n        <div class=\"swiper-wrapper\">\r\n          <div class=\"swiper-slide\" v-for=\"(categorys,index) in categorysArr\" key=\"index\">\r\n            <a href=\"#\" class=\"link_to_food\" v-for=\"(category,index) in categorys\" key=\"index\">\r\n              <div class=\"food_container\">\r\n                <img src=\"./imgs/Hamburger.png\">\r\n              </div>\r\n              <span>商超便利1</span>\r\n            </a>\r\n          </div>\r\n        </div>\r\n        <div class=\"swiper-pagination\"></div>\r\n      </div>\r\n    </nav> -->\r\n\r\n    <!-- <nav class=\"msite_nav\">\r\n      <div class=\"swiper-container\">\r\n        <div class=\"swiper-wrapper\">\r\n          <div class=\"swiper-slide\" v-for=\"(items,index) in arr\" :key=\"index\">\r\n            <a href=\"#\" class=\"link_to_food\" v-for=\"(item,index) in items\" :key=\"index\">\r\n              <div class=\"food_container\">\r\n                <img src=\"./imgs/Hamburger.png\" >\r\n              </div>\r\n              <span>666</span>\r\n            </a>\r\n          </div>\r\n        </div>\r\n        <div class=\"swiper-pagination\"></div>\r\n      </div>\r\n    </nav> -->\r\n\r\n    <nav class=\"msite_nav\">\r\n      <div class=\"swiper-container\">\r\n        <div class=\"swiper-wrapper\">\r\n          <div class=\"swiper-slide\" v-for=\"i in flag\">\r\n            <a href=\"#\" class=\"link_to_food\" v-for=\"(item,index) in arr[i]\" :key=\"index\">\r\n              <div class=\"food_container\">\r\n                <img src=\"./imgs/Hamburger.png\" >\r\n              </div>\r\n              <span>{{item.name}}</span>\r\n            </a>\r\n          </div>\r\n        </div>\r\n        <div class=\"swiper-pagination\"></div>\r\n      </div>\r\n    </nav>\r\n\r\n    <div class=\"msite_shop_list\">\r\n      <div class=\"shop_header\">\r\n        <i class=\"iconfont icon-xuanxiang shop_icon\"></i>\r\n        <span class=\"shop_header_title\">附近商家</span>\r\n      </div>\r\n      <ShopList/>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import ShopList from '../../components/ShopList/ShopList';\r\n  import HeaderTop from '../../components/HeaderTop/HeaderTop.vue';\r\n  import Swiper from 'swiper';\r\n  import 'swiper/dist/css/swiper.css';\r\n  import axios from \"axios\"\r\n  //import {mapState} from 'vuex'\r\n  export default{\r\n    data(){\r\n      return {\r\n        id: '',\r\n        name: '',\r\n        address: '',\r\n        tel: '',\r\n        infos: [],\r\n        arr: [],\r\n        flag:[0,1]\r\n      }\r\n    },\r\n    mounted(){\r\n\r\n      //this.$store.dispatch('getCategorys')\r\n\r\n      //实例 Swiper对象\r\n      new Swiper('.swiper-container',{\r\n        loop: true, //循环\r\n        pagination: {\r\n          el: '.swiper-pagination',\r\n          clickable: true,\r\n        },\r\n      })\r\n      //获取数据\r\n      this.all();\r\n      //this.categoryArr();\r\n    },\r\n    components:{\r\n      HeaderTop,ShopList\r\n    },\r\n    computed: {\r\n      categoryArr(){\r\n        const infos = this.infos;\r\n        let minArr = [];\r\n        infos.forEach(category => {\r\n          if(minArr.length === 8){\r\n            minArr = [];\r\n          }\r\n          if(minArr.length === 0){\r\n            this.arr.push(minArr)\r\n          }\r\n          minArr.push(category)\r\n        });\r\n        return this.arr;\r\n      }\r\n    },\r\n    methods:{\r\n      all() {    //查找info表全部数据\r\n        axios.get('http://127.0.0.1/list/all').then(res=>{\r\n            //console.log(res.data);\r\n            this.infos = res.data\r\n\r\n            // this.arr = [];\r\n            // const categorys = res.data;\r\n            // let minArr = [];\r\n            // categorys.forEach(category => {\r\n            //   if(minArr.length === 8){\r\n            //     minArr = [];\r\n            //   }\r\n            //   if(minArr.length === 0){\r\n            //     this.arr.push(minArr);\r\n            //   }\r\n            //   minArr.push(category)\r\n            // })\r\n        }).catch(err=>{\r\n            console.log(\"获取数据失败\" + err);\r\n        })\r\n      },\r\n      del() {    //删除操作\r\n        axios.get('http://127.0.0.1/list/del',{\r\n          params: {\r\n            id: this.id\r\n          }\r\n        }).then(res=>{\r\n            // console.log(res.data);\r\n            if(res.data.status == 200) {\r\n              this.all()\r\n            }else{\r\n              this.$message({\r\n              message: '删除失败',\r\n              type: 'error'\r\n            });\r\n            }\r\n        }).catch(err=>{\r\n            console.log(\"操作失败\" + err);\r\n        })\r\n      },\r\n      get() {    //查询操作\r\n        axios.get('http://127.0.0.1/list/get',{\r\n          params: {\r\n           id: this.id\r\n          }\r\n        }).then(res=>{\r\n            console.log(res.data);\r\n            //this.info = res.data\r\n        }).catch(err=>{\r\n            console.log(\"操作失败\" + err);\r\n        })\r\n      },\r\n      add() {   //添加操作\r\n        axios.get('http://127.0.0.1/list/add',{\r\n          params: {\r\n            id: this.id,\r\n            name: this.name,\r\n            address: this.address,\r\n            tel: this.tel\r\n          }\r\n        }).then(res=>{\r\n            // console.log(res.data);\r\n            if(res.data.status == 200) {\r\n              this.all()\r\n            }else{\r\n              this.$message({\r\n              message: '添加失败',\r\n              type: 'error'\r\n            });\r\n            }\r\n        }).catch(err=>{\r\n            console.log(\"操作失败\" + err);\r\n        })\r\n      },\r\n      update() {     //修改操作\r\n        axios.get('http://127.0.0.1/list/update',{\r\n          params: {\r\n            id: this.id,\r\n            name: this.name,\r\n            address: this.address,\r\n            tel: this.tel\r\n          }\r\n        }).then(res=>{\r\n            // console.log(res.data);\r\n            if(res.data.status == 200) {\r\n              this.all()\r\n            }else{\r\n              this.$message({\r\n              message: '修改失败',\r\n              type: 'error'\r\n            });\r\n            }\r\n        }).catch(err=>{\r\n            console.log(\"操作失败\" + err);\r\n        })\r\n      },\r\n\r\n    },\r\n    watch:{\r\n      \r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\">\r\n  @import \"../../common/style/mixins.less\";\r\n  .msite{\r\n    width: 100%;\r\n    overflow: hidden;\r\n    .msite_header{\r\n      background-color: #02a774;\r\n      position: fixed;\r\n      z-index: 100;\r\n      left: 0;\r\n      top: 0;\r\n      width: 100%;\r\n      height: 45px;\r\n      .header_search{\r\n        position: absolute;\r\n        left: 15px;\r\n         top: 50%;\r\n         transform: translateY(-50%);\r\n         width: 10%;\r\n         height: 50%;\r\n         .icon-sousuo{\r\n           font-size: 25px;\r\n           color: #fff;\r\n         }\r\n      }\r\n      .header_title{\r\n        position: absolute;\r\n        top: 50%;\r\n        left: 50%;\r\n        transform: translate(-50%, -50%);\r\n        width: 50%;\r\n        color: #fff;\r\n        text-align: center;\r\n        .header_title_text{\r\n          font-size: 20px;\r\n          color: #fff;\r\n          display: block;\r\n        }\r\n      }\r\n      .header_login{\r\n        font-size: 14px;\r\n        color: #fff;\r\n        position: absolute;\r\n        right: 15px;\r\n        top: 50%;\r\n        transform: translateY(-50%);\r\n        .header_login_text{\r\n          color: #fff;\r\n        }\r\n      }\r\n    }\r\n    .msite_nav{\r\n      //.bottom-border-1px(#e4e4e4);\r\n      margin-top: 45px;\r\n      height: 200px;\r\n      background-color: #fff;\r\n      .swiper-container{\r\n        width: 100%;\r\n        height: 100%;\r\n        .swiper-wrapper{\r\n          width: 100%;\r\n          height: 100%;\r\n          .swiper-slide{\r\n            display: flex;\r\n            justify-content: center;\r\n            align-items: flex-start;\r\n            flex-wrap: wrap;\r\n            .link_to_food{\r\n              width: 25%;\r\n              .food_container{\r\n                display: block;\r\n                width: 100%;\r\n                text-align: center;\r\n                padding-bottom: 10px;\r\n                font-size: 0;\r\n                img{\r\n                  display: inline-block;\r\n                  width: 50px;\r\n                  height: 50px;\r\n                }\r\n              }\r\n              span{\r\n                  display: block;\r\n                  width: 100%;\r\n                  text-align: center;\r\n                  font-size: 13px;\r\n                  color: #666;\r\n              }\r\n            }\r\n          }\r\n        }\r\n        .swiper-pagination{\r\n          >.swiper-pagination-bullet{\r\n            transform: translateY(10px);\r\n          }\r\n          >.swiper-pagination-bullet-active{\r\n          background-color: #02a774;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    .msite_shop_list{\r\n      .top-border-1px(#e4e4e4);\r\n      margin-top: 10px;\r\n      background-color: #fff;\r\n      .shop_header{\r\n        padding: 10px 10px 0;\r\n        .shop_icon{\r\n          margin-left: 5px;\r\n          color: #999;\r\n        }\r\n        .shop_header_title{\r\n          color: #999;\r\n          font-size: 14px;\r\n          line-height: 20px;\r\n          margin-left: 5px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}